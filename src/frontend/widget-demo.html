<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBS Widget System - Demonstra√ß√£o</title>
    
    <!-- CSS Dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Widget System CSS -->
    <link href="css/dashboard-widgets.css" rel="stylesheet">
    <link href="css/conversations-panel.css" rel="stylesheet">
    <link href="css/heatmap-widgets.css" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            padding: 2rem 0;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #2D5A9B 0%, #4A7BC8 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 3rem;
            text-align: center;
        }
        
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }
        
        .demo-section h3 {
            color: #2D5A9B;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .code-example {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
        }
        
        .widget-preview {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background: #fafbfc;
        }
        
        .demo-controls {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .test-results {
            background: #f1f8e9;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .navigation-tabs {
            position: sticky;
            top: 0;
            background: white;
            z-index: 100;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="demo-header">
        <div class="container">
            <h1><i class="fas fa-cube me-3"></i>UBS Widget System</h1>
            <p class="lead mb-0">Demonstra√ß√£o e Valida√ß√£o de Componentes</p>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="navigation-tabs">
        <div class="container">
            <ul class="nav nav-pills nav-fill">
                <li class="nav-item">
                    <a class="nav-link active" href="#metrics" onclick="showDemo('metrics')">
                        <i class="fas fa-chart-bar me-2"></i>Metric Cards
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#charts" onclick="showDemo('charts')">
                        <i class="fas fa-chart-line me-2"></i>Charts
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#tables" onclick="showDemo('tables')">
                        <i class="fas fa-table me-2"></i>Tables
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#filters" onclick="showDemo('filters')">
                        <i class="fas fa-filter me-2"></i>Filters
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#sections" onclick="showDemo('sections')">
                        <i class="fas fa-layer-group me-2"></i>Sections
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#conversations" onclick="showDemo('conversations')">
                        <i class="fab fa-whatsapp me-2"></i>Conversas
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#complete" onclick="showDemo('complete')">
                        <i class="fas fa-rocket me-2"></i>Exemplo Completo
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#heatmap" onclick="showHeatmapTab()">
                        <i class="fas fa-fire text-warning me-2"></i>Monitoramento (Heatmap)
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container">
        <!-- Metric Cards Demo -->
        <div id="metrics-demo" class="demo-content">
            <div class="demo-section">
                <h3><i class="fas fa-chart-bar me-2"></i>Metric Cards - Cards de M√©tricas</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-3">
                            <button class="btn btn-primary btn-sm w-100" onclick="updateMetricCard('sales', { value: Math.floor(Math.random() * 100000) + 50000 })">
                                Atualizar Vendas
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success btn-sm w-100" onclick="updateMetricCard('growth', { value: (Math.random() * 50).toFixed(1), trend: { value: (Math.random() * 20).toFixed(1), direction: 'up' } })">
                                Atualizar Crescimento
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-warning btn-sm w-100" onclick="toggleMetricSize()">
                                Alternar Tamanho
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-info btn-sm w-100" onclick="testMetricLoading()">
                                Testar Loading
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <h5 class="mb-3">Diferentes Tipos e Tamanhos:</h5>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>üí∞ Melhoria:</strong> Valores em moeda agora s√£o exibidos <strong>sem centavos</strong> para melhor legibilidade.
                    </div>
                    <div class="row g-3" id="metric-cards-container">
                        <!-- Metric cards will be rendered here -->
                    </div>
                </div>
                
                <div class="test-results" id="metric-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="metric-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Charts Demo -->
        <div id="charts-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fas fa-chart-line me-2"></i>Chart Widgets - Gr√°ficos</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-2">
                            <button class="btn btn-primary btn-sm w-100" onclick="updateChartData('line')">
                                Atualizar Linha
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-success btn-sm w-100" onclick="updateChartData('bar')">
                                Atualizar Barras
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-warning btn-sm w-100" onclick="updateChartData('doughnut')">
                                Atualizar Pizza
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-info btn-sm w-100" onclick="toggleChartTheme()">
                                Alternar Tema
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-secondary btn-sm w-100" onclick="exportCharts()">
                                Exportar
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-danger btn-sm w-100" onclick="testChartError()">
                                Testar Erro
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div class="row g-4">
                        <!-- Line Chart -->
                        <div class="col-lg-6">
                            <div id="line-chart-container">
                                <!-- Line chart will be rendered here -->
                            </div>
                        </div>
                        
                        <!-- Doughnut Chart -->
                        <div class="col-lg-6">
                            <div id="doughnut-chart-container">
                                <!-- Doughnut chart will be rendered here -->
                            </div>
                            <div class="mt-3">
                                <h6>üéØ Funcionalidades do Gr√°fico de Pizza:</h6>
                                <ul class="small text-muted">
                                    <li>‚úÖ <strong>Valor total</strong> automaticamente no centro</li>
                                    <li>‚úÖ <strong>Hover</strong> mostra valor e porcentagem</li>
                                    <li>‚úÖ <strong>Ordena√ß√£o autom√°tica</strong> do menor para o maior</li>
                                    <li>‚úÖ <strong>Formata√ß√£o brasileira</strong> de n√∫meros</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Bar Chart -->
                        <div class="col-12">
                            <div id="bar-chart-container">
                                <!-- Bar chart will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="test-results" id="chart-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="chart-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Tables Demo -->
        <div id="tables-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fas fa-table me-2"></i>Table Widgets - Tabelas</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-2">
                            <button class="btn btn-primary btn-sm w-100" onclick="addTableRow()">
                                Adicionar Linha
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-success btn-sm w-100" onclick="updateTableData()">
                                Atualizar Dados
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-warning btn-sm w-100" onclick="toggleTableStyle()">
                                Alternar Estilo
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-info btn-sm w-100" onclick="testTableSearch()">
                                Testar Busca
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-secondary btn-sm w-100" onclick="exportTableData()">
                                Exportar CSV
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-danger btn-sm w-100" onclick="clearTable()">
                                Limpar Dados
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div id="table-container">
                        <!-- Table will be rendered here -->
                    </div>
                </div>
                
                <div class="test-results" id="table-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="table-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Filters Demo -->
        <div id="filters-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fas fa-filter me-2"></i>Filter Widgets - Filtros</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-3">
                            <button class="btn btn-primary btn-sm w-100" onclick="toggleFilterLayout()">
                                Alternar Layout
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success btn-sm w-100" onclick="addFilterOption()">
                                Adicionar Op√ß√£o
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-warning btn-sm w-100" onclick="getFilterValues()">
                                Obter Valores
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-info btn-sm w-100" onclick="resetFilters()">
                                Reset Filtros
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div id="filter-container">
                        <!-- Filter will be rendered here -->
                    </div>
                    
                    <div class="mt-3">
                        <h6>Valores Atuais dos Filtros:</h6>
                        <pre id="filter-values" class="bg-light p-2 rounded">Nenhum filtro aplicado</pre>
                    </div>
                </div>
                
                <div class="test-results" id="filter-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="filter-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Sections Demo -->
        <div id="sections-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fas fa-layer-group me-2"></i>Section Widgets - Se√ß√µes</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-3">
                            <button class="btn btn-primary btn-sm w-100" onclick="toggleSectionCollapse()">
                                Expandir/Recolher
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success btn-sm w-100" onclick="addSectionContent()">
                                Adicionar Conte√∫do
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-warning btn-sm w-100" onclick="updateSectionTitle()">
                                Atualizar T√≠tulo
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-info btn-sm w-100" onclick="testSectionActions()">
                                Testar A√ß√µes
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div id="section-container">
                        <!-- Section will be rendered here -->
                    </div>
                </div>
                
                <div class="test-results" id="section-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="section-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Real-Time Conversations Demo -->
        <div id="conversations-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fab fa-whatsapp me-2"></i>Real-Time Conversations Panel - Painel de Conversas em Tempo Real</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-2">
                            <button class="btn btn-primary btn-sm w-100" onclick="refreshRealTimeConversations()">
                                <i class="fas fa-sync"></i> Atualizar
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-success btn-sm w-100" onclick="toggleRealTimeAutoRefresh()">
                                <i class="fas fa-play"></i> Auto-Refresh
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-warning btn-sm w-100" onclick="simulateNewConversation()">
                                <i class="fas fa-plus"></i> Nova Conversa
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-info btn-sm w-100" onclick="simulatePhoneActivity()">
                                <i class="fas fa-phone"></i> Simular Atividade
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-secondary btn-sm w-100" onclick="exportConversationsData()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-danger btn-sm w-100" onclick="testConversationsError()">
                                <i class="fas fa-exclamation"></i> Testar Erro
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div class="alert alert-success">
                        <i class="fas fa-comments me-2"></i>
                        <strong>üî¥ Painel de Tempo Real:</strong> Monitoramento ao vivo de conversas ativas com atualiza√ß√£o autom√°tica a cada 10 segundos. N√∫meros de telefone coloridos por dura√ß√£o da conversa.
                    </div>
                    <div class="row">
                        <div class="col-lg-8">
                            <div id="real-time-conversations-container" style="min-height: 500px;">
                                <!-- Real-time conversations panel will be rendered here -->
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">üéØ Funcionalidades do Painel</h6>
                                </div>
                                <div class="card-body">
                                    <ul class="small mb-0">
                                        <li>üî¥ <strong>Indicador LIVE</strong> com atualiza√ß√£o a cada 10s</li>
                                        <li>üì± <strong>Bot√µes de telefone</strong> coloridos por dura√ß√£o</li>
                                        <li>üü¢ <strong>Verde:</strong> Conversas ‚â§ 2 minutos</li>
                                        <li>üü° <strong>Amarelo:</strong> Conversas 2-4 minutos</li>
                                        <li>üî¥ <strong>Vermelho:</strong> Conversas > 4 minutos</li>
                                        <li>üè¢ <strong>Layout por tenant</strong> com info do dom√≠nio</li>
                                        <li>üí¨ <strong>Modal detalhado</strong> com estat√≠sticas</li>
                                        <li>üìä <strong>M√©tricas globais</strong> em tempo real</li>
                                        <li>‚ö° <strong>Performance otimizada</strong> sem espa√ßamento</li>
                                        <li>üì± <strong>Design responsivo</strong> e moderno</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h6 class="mb-0">üìä Estat√≠sticas do Demo</h6>
                                </div>
                                <div class="card-body">
                                    <div id="realtime-conversations-stats">
                                        <div class="d-flex justify-content-between">
                                            <span>Conversas ativas:</span>
                                            <strong id="demo-active-count">0</strong>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>Tenants monitorados:</span>
                                            <strong id="demo-tenants-count">0</strong>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>√öltima atualiza√ß√£o:</span>
                                            <strong id="demo-last-update">-</strong>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>Auto-refresh:</span>
                                            <strong id="demo-autorefresh-status">Ativo</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="test-results" id="conversations-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="conversations-status">Sistema de tempo real inicializado com sucesso!</div>
                </div>
            </div>
        </div>

        <!-- Complete Example Demo -->
        <div id="complete-demo" class="demo-content" style="display: none;">
            <div class="demo-section">
                <h3><i class="fas fa-rocket me-2"></i>Exemplo Completo - Dashboard Integrado</h3>
                
                <div class="demo-controls">
                    <h5>Controles de Teste:</h5>
                    <div class="row g-2">
                        <div class="col-md-2">
                            <button class="btn btn-primary btn-sm w-100" onclick="refreshCompleteDashboard()">
                                Atualizar Tudo
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-success btn-sm w-100" onclick="simulateRealTimeUpdate()">
                                Tempo Real
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-warning btn-sm w-100" onclick="changeTheme()">
                                Mudar Tema
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-info btn-sm w-100" onclick="exportDashboard()">
                                Exportar
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-secondary btn-sm w-100" onclick="testResponsive()">
                                Testar Mobile
                            </button>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-danger btn-sm w-100" onclick="simulateError()">
                                Simular Erro
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="widget-preview">
                    <div id="complete-dashboard-container">
                        <!-- Complete dashboard will be rendered here -->
                    </div>
                </div>
                
                <div class="test-results" id="complete-test-results">
                    <h6><i class="fas fa-check-circle text-success me-2"></i>Status dos Testes:</h6>
                    <div id="complete-status">Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Heatmap Monitoring Demo -->
        <div id="monitoramento-heatmap" style="display:none;">
            <div style="margin-bottom:18px;">
                <span style="font:700 22px Inter,sans-serif;display:flex;align-items:center;gap:8px;">
                    <span style="color:#FFC107;font-size:1.2em;">&#9889;</span> Heat Map de Performance
                </span>
                <div style="margin:8px 0 16px 0;font-size:15px;color:#444;">
                    <span style="display:inline-block;width:18px;height:18px;background:#4CAF50;border-radius:4px;margin-right:6px;vertical-align:middle;"></span>Excelente
                    <span style="display:inline-block;width:18px;height:18px;background:#8BC34A;border-radius:4px;margin:0 6px 0 18px;vertical-align:middle;"></span>Bom
                    <span style="display:inline-block;width:18px;height:18px;background:#FFC107;border-radius:4px;margin:0 6px 0 18px;vertical-align:middle;"></span>Aten√ß√£o
                    <span style="display:inline-block;width:18px;height:18px;background:#F44336;border-radius:4px;margin:0 6px 0 18px;vertical-align:middle;"></span>Cr√≠tico
                    <span style="display:inline-block;width:18px;height:18px;background:#E0E0E0;border-radius:4px;margin:0 6px 0 18px;vertical-align:middle;"></span>Sem conversa
                </div>
            </div>
            <div id="heatmap-container"></div>
        </div>

        <!-- Test Summary -->
        <div class="demo-section">
            <h3><i class="fas fa-clipboard-check me-2"></i>Resumo dos Testes</h3>
            <div id="test-summary" class="row g-3">
                <!-- Test summary will be populated here -->
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Widget System -->
    <script src="js/widgets/dashboard-widget-system.js"></script>
    <script src="js/widgets/conversations-panel-widget.js"></script>
    <script src="js/widgets/stat-card-widget.js"></script>
    <script src="js/widgets/heatmap-widget.js"></script>
    <script src="js/real-time-conversations-panel.js"></script>
    
    <!-- Demo Script -->
    <script src="js/widget-demo.js"></script>
    <script>
        let heatmapWidgetInstance = null;
        function showHeatmapTab() {
            document.getElementById('monitoramento-heatmap').style.display = '';
            // Destroi inst√¢ncia anterior se existir
            if (heatmapWidgetInstance) heatmapWidgetInstance.destroy();
            document.getElementById('heatmap-container').innerHTML = '';
            heatmapWidgetInstance = new HeatmapWidget(
                document.getElementById('heatmap-container'),
                window.heatmapMockData
            );
        }
        // Chame showHeatmapTab() ao selecionar a aba "Monitoramento (Heatmap)"
    </script>
</body>
</html> 